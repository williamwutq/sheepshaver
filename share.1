.TH SHARE 1 "January 2026" "share utility" "User Commands"
.SH NAME
share \- sync files between local filesystem and a shared directory (support multiple files and directories)
.SH SYNOPSIS
.B share
.I command
.RI [ path ... ]
.RI [ options ... ]
.br
Call the specified command on the given path(s) with optional flags.
.br
.br
.B share
.I path
.br
A shortcut for 'share sync <path>'. Works only for a single path.
.SH DESCRIPTION
.B share
is a utility to synchronize files between a local directory tree and a shared directory, preserving relative paths. It is useful for sharing files between different users or systems.

.SH CONFIGURATION
The local root (SHARE_PATH) and shared root (SHARED_ROOT) can be customized:
.TP
~/.sharepath
Absolute path to the local root directory. Only files under this directory are managed.
.TP
~/.shareroot
Absolute path to the shared root directory. Defaults to ~/Shared/dump if not set.
.TP
**/.shareoverride
Directory containing local overrides for SHARE_PATH and SHARED_ROOT. If this directory exists in any ancestor of the current directory, its config files will be used instead of the global ones.
.TP
**/.shareignore
Patterns of files to ignore during operations, similar to .gitignore. When recursive operations are performed on directories, files matching these patterns will be skipped. However, this will not affect the pushall, pullall, and syncall commands, which always consider all files beneath SHARE_PATH.

.SH OPTIONS
.TP
.B --help, -h
Display help information about the share utility.
.TP
.B --version, -v
Display the version of the share utility.

.TP
The following flags can be used to control the verbosity of the output:
.TP
.B --suppress-extra, --no-extra, -next, -sext
Suppress extra informational messages.
.TP
.B --suppress-error, --no-error, -nerr, -serr
Suppress error messages.
.TP
.B --suppress-critical, --no-critical, -ncrt, -scrt
Suppress critical error messages.
.TP
.B --suppress, --no, -no, -s
Suppress all messages except critical errors.
.TP
.B --ignore <pattern>, -i <pattern>
Specify additional ignore patterns (can be used multiple times).
.TP
.B --yes, -y
Automatic yes to prompts (for auto command).

.SH COMMANDS
.TP
.B list
List all files in shared directory.
.TP
.B auto
Perform automatic actions based on current directory context.
.TP
.B info
Show configuration information.
.TP
.B config path <path>
Set SHARE_PATH to specified path. This is the local root.
.TP
.B config root <path>
Set SHARED_ROOT to specified path. This is the shared root.
.TP
.B config show
Show current configuration.
.TP
.B config override
Override global config files with a .shareoverride in current directory.
.TP
.B config remove
Remove global config overrides stored in .shareoverride from current directory.
.TP
.B config global <cmd>
Manage global configuration.
.TP
.B put <path> [...]
Copy file(s) to shared (always overwrite). If input is a directory, put all files under it.
.TP
.B push <path> [...]
Copy to shared only if local is newer. If input is a directory, push all files under it.
.TP
.B pushall
Push all local files to shared if local is newer.
.TP
.B get <path> [...]
Copy from shared to local (always overwrite). If input is a directory, get all files under it.
.TP
.B pull <path> [...]
Copy from shared only if shared is newer. If input is a directory, pull all files under it.
.TP
.B pullall
Pull all shared files to local if shared is newer.
.TP
.B sync <path> [...]
Sync by copying whichever is newer. If input is a directory, sync all files under it.
.TP
.B syncall
Sync all files by copying whichever is newer.
.TP
.B check <path> [...]
Check sync status of file(s).
.TP
.B rm <path> [...]
Remove file(s) from shared location.
.TP
.B audit <path> [...]
Audit local directory to verify synced files. If input is a directory, audit all files under it.
.TP
.B auditall
Audit entire shared directory to verify synced files.
.TP
.B status [dir ...]
Show status of entire shared directory or local directory if specified.
.TP
.B preview <cmd> [...]
Preview the specified command without making changes.

.SH EXAMPLES
.nf
share put rust/cargo.toml
share README.md
share push rust/cargo.toml src/main.rs
share check rust/cargo.toml src/main.rs
share list
share status
share status rust src
.fi

.SH EXAMPLE SETUP
.SS With a constant shared directory for local sharing or dual-boot
Mount your shared partition (e.g., an exFAT or NTFS partition) to a known location, then set that as your SHARED_ROOT:
.nf
	mount /dev/my_device /mnt/shared_drive
	share config root /mnt/shared_drive/shared_files
.fi
You can now use \fBshare put\fR, \fBshare push\fR, \fBshare sync\fR, etc. to manage files between your local directory and the shared partition.

.SS Share with other users on a multi-user system
With sudo access, run:
.nf
	sudo mkdir -p /usr/share/dump
	sudo chmod 1777 /usr/share/dump
	share config root /usr/share/dump
.fi
For individual users, set their local root if necessary:
.nf
	share config path ~/projects
.fi
Or they will default to their home directory, which is usually acceptable.

.SS Share with external drives or removable media
Mount your external drive to a known location, then set that as your SHARED_ROOT:
.nf
	mount /dev/sdX1 /mnt/external_drive
	share config root /mnt/external_drive
.fi
Then you can use \fBshare put\fR, \fBshare push\fR, \fBshare sync\fR, etc. to manage files between your local directory and the external drive.

After finishing, unmount the drive safely:
.nf
	umount /mnt/external_drive
	share config root ~/Shared/dump
.fi
Reset shared root to default if needed.

.SS Share over SSH
You can set the SHARED_ROOT to a remote path via SSH:
.nf
	share config root user@remote_host:/path/to/shared_directory
.fi
Ensure you have passwordless SSH access to the remote host. You can then use \fBshare put\fR, \fBshare push\fR, \fBshare sync\fR, etc. to manage files between your local directory and the remote shared directory.

The bulk operations are currently not supported YET over SSH.

.SH NOTES
- Only files under SHARE_PATH are managed. Attempts to share files outside this path will be rejected.
- The mapping preserves the relative path under SHARE_PATH in SHARED_ROOT.

.SH AUTHOR
William Wu, 2026
.SH VERSION
1.4
.SH LICENSE
GPLv2 or later
